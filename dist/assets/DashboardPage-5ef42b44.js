import{R as S,r as y,j as r,p as h,F,w as Y}from"./index-ad61e450.js";import{a6 as X,a0 as O,a2 as J,a1 as K,a3 as C,U as L,V as G,i as $,j as Q,W as Z,l as j,m as H,d as ee,s as x,a7 as q,v as M,a8 as te,a9 as ae,X as E,N as w,R as N,w as I,x as V,aa as re,H as _,ab as ne,ac as le,ad as W,ae as ie,_ as se,n as z,af as oe,ag as ce,ah as de,ai as ue,aj as he,ak as fe}from"./routes-3ee497c9.js";import{c as b,u as me,d as pe,f as ge,T,g as v,h as ve,i as ye}from"./currency.es-1e8bfebb.js";import{t as k}from"./index-344f66e9.js";import{g as U,f as A}from"./index-18bfe9e5.js";var D=(...t)=>t.filter(Boolean).join(" "),[ke,B]=X("Card"),xe=O(function(a,e){const{className:l,children:i,direction:n="column",justify:o,align:u,...d}=J(a),c=K("Card",a);return S.createElement(C.div,{ref:e,className:D("chakra-card",l),__css:{display:"flex",flexDirection:n,justifyContent:o,alignItems:u,position:"relative",minWidth:0,wordWrap:"break-word",...c.container},...d},S.createElement(ke,{value:c},i))}),we=O(function(a,e){const{className:l,...i}=a,n=B();return S.createElement(C.div,{ref:e,className:D("chakra-card__body",l),__css:n.body,...i})});O(function(a,e){const{className:l,justify:i,...n}=a,o=B();return S.createElement(C.div,{ref:e,className:D("chakra-card__footer",l),__css:{display:"flex",justifyContent:i,...o.footer},...n})});O(function(a,e){const{className:l,...i}=a,n=B();return S.createElement(C.div,{ref:e,className:D("chakra-card__header",l),__css:n.header,...i})});function Se(t,a){var e,l,i,n,o,u,d,c;L(1,arguments);var g=U(),f=G((e=(l=(i=(n=a==null?void 0:a.weekStartsOn)!==null&&n!==void 0?n:a==null||(o=a.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:g.weekStartsOn)!==null&&l!==void 0?l:(d=g.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=k(t),s=m.getDay(),p=(s<f?7:0)+s-f;return m.setDate(m.getDate()-p),m.setHours(0,0,0,0),m}function Me(t,a){var e,l,i,n,o,u,d,c;L(1,arguments);var g=U(),f=G((e=(l=(i=(n=a==null?void 0:a.weekStartsOn)!==null&&n!==void 0?n:a==null||(o=a.locale)===null||o===void 0||(u=o.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&i!==void 0?i:g.weekStartsOn)!==null&&l!==void 0?l:(d=g.locale)===null||d===void 0||(c=d.options)===null||c===void 0?void 0:c.weekStartsOn)!==null&&e!==void 0?e:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=k(t),s=m.getDay(),p=(s<f?-7:0)+6-(s-f);return m.setDate(m.getDate()+p),m.setHours(23,59,59,999),m}function P(t,a){L(2,arguments);var e=k(t),l=k(a);return e.getTime()===l.getTime()}function _e(t){const a=[];return t.forEach(e=>{const l=Se(k(e.date)),i=Me(k(e.date)),n=a.find(o=>P(o.weekStart,l)&&P(o.weekEnd,i));n?(n.backhaul+=e.backhaul,n.endingMiles+=e.endingMiles,n.payMiles+=e.payMiles,n.startingMiles+=e.startingMiles,n.totalMiles+=e.totalMiles,n.totalPay+=Number(R(e.totalMiles,e.payMiles,e.backhaul))):a.push({weekStart:l,weekEnd:i,backhaul:e.backhaul,endingMiles:e.endingMiles,payMiles:e.payMiles,startingMiles:e.startingMiles,totalMiles:e.totalMiles,totalPay:Number(R(e.totalMiles,e.payMiles,e.backhaul))})}),a}function R(t,a,e=0){return t>a?b(t,{precision:2}).multiply(.515).add(e):b(a,{precision:2}).multiply(.515).add(e)}function be(){const t=$(x);let a;t!=null&&t.isSignedIn&&(t!=null&&t.userId)&&(a=Q(j(ee,H.USERS,`${t==null?void 0:t.userId}`,`${H.PAYSHEETS}`),Z("date","desc")));const[e,l,i]=me(a);let n=[];return y.exports.useEffect(()=>{!l&&(t!=null&&t.isSignedIn)&&(x.paysheets=e,n=_e(e),x.weeks=n)},[l]),{weeks:n,totals:e,totalsLoading:l,totalsError:i}}function Oe(t){return q({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 15v3.586a1 1 0 0 1 -1.707 .707l-6.586 -6.586a1 1 0 0 1 0 -1.414l6.586 -6.586a1 1 0 0 1 1.707 .707v3.586h3v6h-3z"}},{tag:"path",attr:{d:"M21 15v-6"}},{tag:"path",attr:{d:"M18 15v-6"}}]})(t)}function Ce(t){return q({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-3v-6h3z"}},{tag:"path",attr:{d:"M3 9v6"}},{tag:"path",attr:{d:"M6 9v6"}}]})(t)}function De({totalMiles:t,totalPay:a,totalBackHaulPay:e,weekStartDate:l,weekEndDate:i}){const n=M("gray.200","gray.800"),o=new Date(Number(l)),u=new Date(Number(i)),d=A(o,"MM/dd/yyyy"),c=A(u,"MM/dd/yyyy"),g=M("gray","cyan.600"),f=M("blackAlpha","cyan");return r(te,{children:r(ae,{as:E,to:"/weekly",state:{weekStartFormat:d,weekEndFormat:c,startDate:o,endDate:u},sx:{textDecoration:"none"},children:r(xe,{m:"10px",bg:n,border:"1px",borderColor:g,px:"10px",boxShadow:"xl",rounded:20,children:h(we,{children:[r(w,{children:h(N,{size:"xs",children:["Dates: ",d," - ",c]})}),h(pe,{variant:"simple",colorScheme:f,size:{base:"sm",sm:"md",lg:"lg"},children:[r(ge,{children:h(T,{children:[r(v,{isNumeric:!0,children:"Total "}),r(v,{isNumeric:!0,children:"Total "}),r(v,{isNumeric:!0,children:"Total "})]})}),r(ve,{children:h(T,{children:[r(v,{isNumeric:!0,children:t}),r(v,{isNumeric:!0,children:b(a).format()}),r(v,{isNumeric:!0,children:b(e).format()})]})}),r(ye,{children:h(T,{children:[r(v,{isNumeric:!0,children:" Miles"}),r(v,{isNumeric:!0,children:" Pay"}),r(v,{isNumeric:!0,children:" Backhaul"})]})})]})]})})})})}function Te({itemsPerPage:t}){const[a,e]=y.exports.useState(0),[l,i]=y.exports.useState(1),n=$(x),o=a+t,u=n.weeks.slice(a,o),d=Math.ceil(n.weeks.length/t),c=Array.from(Array(d).keys()),g=s=>{const p=s.selected*t%n.weeks.length;e(p),i(s.selected+1)},f=()=>{const s=(a-t)%n.weeks.length;e(s),i(l-1)},m=()=>{const s=(a+t)%n.weeks.length;e(s),i(l+1)};return h(F,{children:[u.map((s,p)=>r(I.div,{initial:{x:-0,opacity:0,scale:.8},animate:{x:0,opacity:.9,scale:[.8,1,1.2,1.4,1.2,1]},transition:{type:"spring",stiffness:90,delay:p*.2,damping:15},whileHover:{cursor:"pointer",opacity:1},whileTap:{scale:.9},children:r(De,{totalMiles:s.totalMiles,totalPay:s.totalPay,totalBackHaulPay:s.backhaul,weekStartDate:Date.parse(s==null?void 0:s.weekStart).toString(),weekEndDate:Date.parse(s==null?void 0:s.weekEnd).toString()})},s.weekStart)),r(V,{h:c.length<3?"30px":"20px"}),r(w,{children:h(re,{children:[c.length>0?r(_,{leftIcon:r(Oe,{}),variant:"outline",colorScheme:"cyan",onClick:f,_hover:{bg:"cyan.600",color:"white",scale:1.1},disabled:l===1}):null,c.map((s,p)=>r(_,{colorScheme:"cyan",variant:"outline",_hover:{bg:"cyan.600",color:"white",scale:1.1},onClick:()=>g({selected:p}),children:p+1},p)),c.length>0?r(_,{leftIcon:r(Ce,{}),variant:"outline",colorScheme:"cyan",onClick:m,_hover:{bg:"cyan.600",color:"white",scale:1.1},disabled:l===d}):null]})})]})}function Be(){Y();const t=$(x);y.exports.useState(Math.ceil(t.weeks.length/4)),y.exports.useState([]),y.exports.useState(1),y.exports.useState([]),be();const a=M("white"," gray.800");return r(F,{children:r(y.exports.Suspense,{fallback:r("div",{children:r(ne,{})}),children:h(le,{columns:[1,null,3],spacing:"10px",children:[h(W,{w:"100%",h:"100%",bg:a,colSpan:2,p:"5",children:[r(N,{as:I.h1,fontSize:["4xl","4xl","5xl"],fontWeight:"extrabold",mt:"50px",ml:"20px",mb:"40px",textAlign:"center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},bgGradient:"linear(to-b, #42047e, #07f49e)",bgClip:"text",children:"Dashboard"}),h(V,{w:"100%",h:"100%",bg:a,children:[t.weeks.length===0?h(ie,{fontSize:"lg",fontWeight:"extrabold",ml:"20px",children:["Here is where you will see your weekly totals. To get started click the DailyForm button on top or go"," ",r(se,{as:E,to:z.DAILY,color:"cyan.600",children:"here"})]}):null,r(Te,{itemsPerPage:4})]})]}),r(W,{w:"100%",h:"500px",bg:a,children:r(I.div,{initial:{opacity:0},animate:{opacity:1},transition:{type:"spring",stiffness:90,delay:.5},exit:{opacity:0},children:h(oe,{spacing:"10px",children:[h(w,{mt:"50px",children:[r(ce,{size:"2xl",my:"auto",mx:"200px",name:t.userEmail,src:t.avatar,children:r(de,{boxSize:"1.25em",bg:"cyan.700"})}),r(ue,{children:r(he,{src:t.avatar,referrerPolicy:"no-referrer"})})]}),r(fe,{orientation:"horizontal"}),r(w,{mt:"20px",overflow:"hidden",children:r(N,{as:"h3",fontSize:"xl",fontWeight:"extrabold",children:t.userEmail})}),r(w,{mt:"20px",children:r(_,{colorScheme:"cyan",variant:"outline",as:E,to:z.PROFILE,_hover:{bg:"cyan.600",color:"white",scale:1.1},children:"Edit Profile"})})]})})})]})})})}export{Be as default};
