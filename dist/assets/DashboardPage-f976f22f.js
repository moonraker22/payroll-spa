import{R as v,j as e,o as l,F as S,r as p}from"./index-24a35cdf.js";import{S as Y}from"./SpinnerComp-87c1325a.js";import{S as $,f as C,o as J,p as K,g as k,F as x,M as _,Q as U,v as T,y as j}from"./motion-cdcae086.js";import{u as E}from"./store-42d03b25.js";import{b as X}from"./index.esm-2fc407ea.js";import{u as Z,s as ee,D as te,F as ae,I as re,a as oe,b as ne}from"./zod.module-af5a49a2.js";import{G as I}from"./iconBase-08f30868.js";import{c as H}from"./currency.es-57f74176.js";import{f as W}from"./index-0872f226.js";import{e as ie,f as se,C as f,b as B,B as L,F as le,h as ce,G,a as de,T as he,L as me,S as ue,D as ge}from"./index.esm-2b3a3b4e.js";import{g as pe,i as ye,j as F,k as g,l as fe,m as xe,n as ve,M as be,o as Se,c as Ce,d as ke,e as we,L as Pe}from"./index.esm-c6ec0f38.js";import{a as w,B as Me,I as R}from"./index.esm-72ff9165.js";import{t as N}from"./index-9ba3ed2e.js";import{r as De}from"./index-75959897.js";import{u as Fe}from"./index.esm-699be640.js";import{A as Ne,a as _e,V as Te,I as Be}from"./index.esm-eccd606a.js";import"./index.esm-f315c78a.js";import"./index-b31f775c.js";import"./index.esm-3baeca56.js";import"./index.esm-b014f26f.js";var P=(...t)=>t.filter(Boolean).join(" "),[Ee,A]=$("Card"),Ie=C(function(a,n){const{className:o,children:s,direction:i="column",justify:c,align:d,...m}=J(a),r=K("Card",a);return v.createElement(k.div,{ref:n,className:P("chakra-card",o),__css:{display:"flex",flexDirection:i,justifyContent:c,alignItems:d,position:"relative",minWidth:0,wordWrap:"break-word",...r.container},...m},v.createElement(Ee,{value:r},s))}),Le=C(function(a,n){const{className:o,...s}=a,i=A();return v.createElement(k.div,{ref:n,className:P("chakra-card__body",o),__css:i.body,...s})});C(function(a,n){const{className:o,justify:s,...i}=a,c=A();return v.createElement(k.div,{ref:n,className:P("chakra-card__footer",o),__css:{display:"flex",justifyContent:s,...c.footer},...i})});C(function(a,n){const{className:o,...s}=a,i=A();return v.createElement(k.div,{ref:n,className:P("chakra-card__header",o),__css:i.header,...s})});function Ae(t,a){De(2,arguments);var n=N(t).getTime(),o=N(a.start).getTime(),s=N(a.end).getTime();if(!(o<=s))throw new RangeError("Invalid interval");return n>=o&&n<=s}function ze(t){return I({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M16 120h480v48H16zm80 112h320v48H96zm96 112h128v48H192z"}}]})(t)}function O({totalMiles:t,totalPay:a,backhaul:n,weekStart:o,weekEnd:s}){const i=x("gray.200","gray.800"),c=new Date(Number(o)),d=new Date(Number(s)),m=W(c,"MM/dd/yyyy"),r=W(d,"MM/dd/yyyy"),h=x("gray","cyan.600"),y=x("blackAlpha","cyan");return e(ie,{children:e(se,{as:_,to:"/weekly",state:{weekStartFormat:m,weekEndFormat:r,startDate:c,endDate:d},sx:{textDecoration:"none"},children:e(Ie,{my:{base:"5px",sm:"10px",lg:"20px"},mx:{base:"10px",sm:"20px",lg:"40px"},bg:i,border:"1px",borderColor:h,px:{base:"0px",sm:"10px",lg:"10px"},boxShadow:"xl",rounded:20,variant:"elevated",children:l(Le,{children:[e(f,{children:l(B,{size:"xs",children:["Dates: ",m," - ",r]})}),l(pe,{variant:"simple",colorScheme:y,size:{base:"sm",sm:"md",lg:"lg"},children:[e(ye,{children:l(F,{children:[e(g,{isNumeric:!0,children:"Total "}),e(g,{isNumeric:!0,children:"Total "}),e(g,{isNumeric:!0,children:"Total "})]})}),e(fe,{children:l(F,{children:[e(g,{isNumeric:!0,children:t}),e(g,{isNumeric:!0,children:H(a).format()}),e(g,{isNumeric:!0,children:H(n).format()})]})}),e(xe,{children:l(F,{children:[e(g,{isNumeric:!0,children:" Miles"}),e(g,{isNumeric:!0,children:" Pay"}),e(g,{isNumeric:!0,children:" Backhaul"})]})})]})]})})})})}function je({filterDate:t,isOpen:a,onClose:n}){return e(S,{children:l(ve,{isOpen:a,onClose:n,size:"xl",variant:"floating",children:[e(be,{}),l(Se,{children:[e(Ce,{}),l(ke,{children:[t&&(t==null?void 0:t.map((o,s)=>e("div",{children:e(O,{totalMiles:o.totalMiles,totalPay:o.totalPay,backhaul:o.backhaul,weekStart:Date.parse(o==null?void 0:o.weekStart).toString(),weekEnd:Date.parse(o==null?void 0:o.weekEnd).toString()})},s))),t.length===0&&e(L,{children:"No data for this week"})]}),e(we,{children:e(w,{colorScheme:"cyan",type:"submit",variant:"outline",_hover:{bg:"cyan.600",color:"white",scale:1.1},mr:3,onClick:n,children:"Close"})})]})]})})}function He(){var z;const t=E(),a=x("gray.800","gray"),[n,o]=p.exports.useState([]),{isOpen:s,onOpen:i,onClose:c}=Fe(),{register:d,handleSubmit:m,formState:{isSubmitting:r,isDirty:h,errors:y,isValid:u,touchedFields:b}}=Z({resolver:ee(te)});function V(M){q(M.date),i()}const q=p.exports.useCallback(M=>{const Q=t.weeks.filter(D=>{if(Ae(new Date(M),{start:new Date(D.weekStart),end:new Date(D.weekEnd)}))return D});o(Q)},[t.weeks]);return l(S,{children:[e(U,{onSubmit:m(V),children:e(f,{children:l(le,{px:"5",w:"90%",children:[l(ae,{isInvalid:!!y.date,isRequired:!0,variant:"floating",children:[e(re,{type:"date",...d("date"),placeholder:"Date",mb:"3",_placeholder:{color:a},boxShadow:"lg"}),e(oe,{children:"Search Date"}),e(ne,{children:y.date&&((z=y.date)==null?void 0:z.message)})]}),e(w,{ml:"5",colorScheme:"cyan",isLoading:r,type:"submit",disabled:!h||!u,loadingText:"Submitting",variant:"outline",_hover:{bg:"cyan.600",color:"white",scale:1.1},boxShadow:"lg",rightIcon:e(ze,{}),children:"Filter"})]})})}),e(je,{filterDate:n,onClose:c,isOpen:s})]})}const We=({pageSize:t})=>{const[a,n]=p.exports.useState(1),[o,s]=p.exports.useState([]),i=E(),c=Math.ceil(i.weeks.length/t),d=Math.ceil(i.weeks.length/t),m=Array.from(Array(c).keys()),r=u=>{const b=u.selected;n(b+1)};return p.exports.useEffect(()=>{const u=(a-1)*t,b=i.weeks.slice(u,u+t);s(b)},[i.weeks,a,t]),{currentPage:a,pageData:o,getPreviousPage:()=>{n(u=>Math.max(u-1,1))},getNextPage:()=>{n(u=>Math.min(u+1,d))},mapArray:m,handlePageClick:r,pageCount:c}};function Ge(t){return I({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 15v3.586a1 1 0 0 1 -1.707 .707l-6.586 -6.586a1 1 0 0 1 0 -1.414l6.586 -6.586a1 1 0 0 1 1.707 .707v3.586h3v6h-3z"}},{tag:"path",attr:{d:"M21 15v-6"}},{tag:"path",attr:{d:"M18 15v-6"}}]})(t)}function Re(t){return I({tag:"svg",attr:{viewBox:"0 0 24 24",strokeWidth:"2",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"desc",attr:{},child:[]},{tag:"path",attr:{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}},{tag:"path",attr:{d:"M12 9v-3.586a1 1 0 0 1 1.707 -.707l6.586 6.586a1 1 0 0 1 0 1.414l-6.586 6.586a1 1 0 0 1 -1.707 -.707v-3.586h-3v-6h3z"}},{tag:"path",attr:{d:"M3 9v6"}},{tag:"path",attr:{d:"M6 9v6"}}]})(t)}function Oe({itemsPerPage:t}){const{currentPage:a,pageData:n,getPreviousPage:o,getNextPage:s,mapArray:i,handlePageClick:c,pageCount:d}=We({pageSize:t}),m=p.exports.useCallback(r=>r===1||r===d||r>=a-2&&r<=a+2?!0:(r<a-2||r>a+2,!1),[a,d]);return l(S,{children:[n.map((r,h)=>e(T.div,{initial:{opacity:0,scale:0},animate:{opacity:.9,scale:[.8,1,1.2,1.4,1.2,1]},exit:{opacity:0},transition:{type:"spring",stiffness:90,delay:h*.2,damping:15},whileHover:{cursor:"pointer",opacity:1},children:e(O,{totalMiles:r.finalMiles,totalPay:r.totalPay,backhaul:r.backhaul,weekStart:Date.parse(r==null?void 0:r.weekStart).toString(),weekEnd:Date.parse(r==null?void 0:r.weekEnd).toString()})},r.weekStart)),e(L,{h:i.length<3?"30px":"20px",sx:{overflow:"hidden"}}),e(f,{children:l(Me,{isAttached:!0,children:[i.length>0&&a>1?e(R,{icon:e(Ge,{}),variant:"outline",colorScheme:"cyan",onClick:o,_hover:{bg:"cyan.600",color:"white",scale:1.1},boxShadow:"lg",disabled:a===1,"aria-label":"Previous Page"}):null,i.map((r,h)=>e(w,{colorScheme:"cyan",variant:a===h+1?"ghost":"outline",_hover:{bg:"cyan.600",color:"white",scale:1.1},boxShadow:"lg",onClick:()=>c({selected:h}),display:m(h+1)?"block":"none",children:h+1},r)),i.length>0&&a<d?e(R,{icon:e(Re,{}),variant:"outline",colorScheme:"cyan",onClick:s,_hover:{bg:"cyan.600",color:"white",scale:1.1},boxShadow:"lg",disabled:a===d,"aria-label":"Next Page"}):null]})})]})}function dt(){const t=E(),a=x("white"," gray.800");return e(S,{children:e(p.exports.Suspense,{fallback:e("div",{children:e(Y,{})}),children:e(ce,{columns:[1,null,3],spacing:"10px",children:l(Pe,{children:[l(G,{w:"100%",h:"100%",bg:a,colSpan:2,p:"5",children:[e(B,{as:T.h1,fontSize:["4xl","4xl","5xl"],fontWeight:"extrabold",mt:"50px",ml:"20px",mb:"40px",textAlign:"center",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},bgGradient:"linear(to-b, #42047e, #07f49e)",bgClip:"text",children:"Dashboard"}),e(He,{}),l(L,{w:"100%",h:"100%",bg:a,children:[t.weeks.length===0?e(de,{mt:"30px",children:l(he,{fontSize:"lg",fontWeight:"extrabold",ml:"20px",children:["Here is where you will see your weekly totals. To get started click the DailyForm button on top or go"," ",e(me,{as:_,to:j.DAILY,color:"cyan.600",children:"here"})]})}):null,e(Oe,{itemsPerPage:4})]})]}),e(G,{w:"100%",h:"500px",bg:a,children:e(T.div,{initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:100,delay:.5,damping:15,duration:.7},exit:{opacity:0},children:l(ue,{spacing:"10px",children:[l(f,{mt:"50px",children:[e(Ne,{size:"2xl",my:"auto",mx:"200px",name:t.userEmail,src:t.avatar,children:e(_e,{boxSize:"1.25em",bg:"cyan.700"})}),e(Te,{children:e(Be,{src:t.avatar,referrerPolicy:"no-referrer",alt:"avatar"})})]}),e(ge,{orientation:"horizontal"}),e(f,{mt:"20px",overflow:"hidden",children:e(B,{as:"h3",fontSize:"xl",fontWeight:"extrabold",children:t.userEmail})}),e(f,{mt:"20px",children:e(w,{colorScheme:"cyan",variant:"outline",as:_,to:j.PROFILE,_hover:{bg:"cyan.600",color:"white",scale:1.1},rightIcon:e(X,{}),boxShadow:"lg",children:"Edit Profile"})})]})})})]})})})})}export{dt as default};
//# sourceMappingURL=DashboardPage-f976f22f.js.map
