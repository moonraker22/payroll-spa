import{r as y,p as s,j as a}from"./index-ad61e450.js";import{au as C,u as F,A as L,d as z,K as E,av as P,s as A,i as R,q as k,v as f,M as H,N as r,R as g,w as h,af as W,ai as j,aj as I,ag as B,ah as D,ak as M,F as U,y as V,aa as _,x as b,I as K,z as T,H as S,D as q,X as G,n as J,J as N,aw as O}from"./routes-3ee497c9.js";function X(){const[i,e]=y.exports.useState(!0),[n,l]=y.exports.useState(null),{user:t}=C(),o=F();async function p({avatarUrl:c}){if(e(!0),!t)return o({title:"You must be logged in to set avatar",status:"error",isClosable:!0,position:"top",duration:5e3,colorScheme:"teal",variant:"solid"}),!1;const d=L(z,"users",`${t.id}`);try{await E(d,{avatar:c,updatedAt:P()}),A.avatar=c,o({title:"Avatar updated",status:"success",isClosable:!0,position:"top",duration:5e3,colorScheme:"cyan",variant:"solid"}),e(!1)}catch(u){l(u),e(!1)}}return{setAvatar:p,isLoading:i,error:n}}function Q(){var x,v;const i={},e=R(A),{register:n,handleSubmit:l,formState:{errors:t}}=k({defaultValues:i,resolver:N(O)}),{setAvatar:o,isLoading:p,error:c}=X(),d=w=>{o({avatarUrl:w.avatar})},u=f("white"," gray.800"),m=f("gray.800","white");return s(H,{p:"10px",color:"gray.300",children:[a(r,{children:a(g,{as:h.h1,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},mt:10,bgGradient:"linear(to-b, #42047e, #07f49e)",bgClip:"text",fontSize:["4xl","4xl","5xl"],fontWeight:"extrabold",children:"Profile"})}),a(r,{as:h.div,bg:u,border:"2px",borderColor:"cyan.700",boxShadow:"dark-lg",p:"5",rounded:"md",mt:"50px",mb:"100px",maxW:"500px",minW:"200px",minH:"300px",initial:{opacity:0,y:80},animate:{opacity:1,y:0},exit:{opacity:0},children:a(h.div,{initial:{opacity:0},animate:{opacity:1},transition:{type:"spring",stiffness:90,delay:.5},exit:{opacity:0},children:s(W,{spacing:"10px",children:[s(r,{mt:"50px",children:[a(j,{children:a(I,{src:e.avatar,referrerPolicy:"no-referrer"})}),a(B,{size:"xl",name:e.userEmail,src:e.avatar,referrerPolicy:"no-referrer",children:a(D,{boxSize:"1.25em",bg:"cyan.700"})})]}),a(M,{orientation:"horizontal"}),a(r,{mt:"20px",children:a(g,{as:"h3",fontSize:"2xl",fontWeight:"extrabold",color:m,children:e.userEmail})}),a(r,{mt:"20px",children:a(U,{onSubmit:l(d),children:s(V,{isInvalid:!!((x=t.avatar)!=null&&x.message),variant:"floating",children:[s(_,{spacing:"10px",mt:"5",children:[s(b,{children:[a(K,{...n("avatar"),placeholder:"Avatar"}),a(T,{htmlFor:"avatar",placeholder:"Avatar URL",sx:{color:m},children:"Avatar URL"})]}),a(b,{children:a(S,{type:"submit",colorScheme:"cyan",variant:"outline",_hover:{bg:"cyan.600",color:"white",scale:1.1},children:"Update"})})]}),a(r,{my:"10px",children:a(q,{children:t.avatar&&((v=t.avatar)==null?void 0:v.message)})})]})})}),a(r,{mt:"20px",children:a(S,{colorScheme:"cyan",variant:"outline",as:G,to:J.PASSWORD_RESET,_hover:{bg:"cyan.600",color:"white",scale:1.1},children:"Change Password"})})]})})})]})}export{Q as default};
