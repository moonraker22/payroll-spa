import{r as u,R as f,j as a,F as $,p as S,d as ee}from"./index-ad61e450.js";import{g as I,w as F,al as V,x as C,N as j,ae as Y,_ as te,am as ie,i as ne,q as re,v as ae,M as se,R as oe,F as le,y as D,I as L,z as H,D as W,H as M,aa as de,c as ce,s as ue,J as me,an as pe}from"./routes-3ee497c9.js";import{u as xe}from"./usePasswordReset-ea3187d2.js";var O=(...t)=>t.filter(Boolean).join(" ");function he(){return!1}var fe=t=>{const{condition:e,message:n}=t;e&&he()&&console.warn(n)},b={ease:[.25,.1,.25,1],easeIn:[.4,0,1,1],easeOut:[0,0,.2,1],easeInOut:[.4,0,.2,1]},P={scale:{enter:{scale:1},exit:{scale:.95}},fade:{enter:{opacity:1},exit:{opacity:0}},pushLeft:{enter:{x:"100%"},exit:{x:"-30%"}},pushRight:{enter:{x:"-100%"},exit:{x:"30%"}},pushUp:{enter:{y:"100%"},exit:{y:"-30%"}},pushDown:{enter:{y:"-100%"},exit:{y:"30%"}},slideLeft:{position:{left:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"-100%",y:0}},slideRight:{position:{right:0,top:0,bottom:0,width:"100%"},enter:{x:0,y:0},exit:{x:"100%",y:0}},slideUp:{position:{top:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"-100%"}},slideDown:{position:{bottom:0,left:0,right:0,maxWidth:"100vw"},enter:{x:0,y:0},exit:{x:0,y:"100%"}}};function U(t){switch((t==null?void 0:t.direction)??"right"){case"right":return P.slideRight;case"left":return P.slideLeft;case"bottom":return P.slideDown;case"top":return P.slideUp;default:return P.slideRight}}var E={enter:{duration:.2,ease:b.easeOut},exit:{duration:.1,ease:b.easeIn}},h={enter:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.enter}),exit:(t,e)=>({...t,delay:typeof e=="number"?e:e==null?void 0:e.exit})},ve=t=>t!=null&&parseInt(t.toString(),10)>0,B={exit:{height:{duration:.2,ease:b.ease},opacity:{duration:.3,ease:b.ease}},enter:{height:{duration:.3,ease:b.ease},opacity:{duration:.4,ease:b.ease}}},we={exit:({animateOpacity:t,startingHeight:e,transition:n,transitionEnd:i,delay:r})=>({...t&&{opacity:ve(e)?1:0},height:e,transitionEnd:i==null?void 0:i.exit,transition:(n==null?void 0:n.exit)??h.exit(B.exit,r)}),enter:({animateOpacity:t,endingHeight:e,transition:n,transitionEnd:i,delay:r})=>({...t&&{opacity:1},height:e,transitionEnd:i==null?void 0:i.enter,transition:(n==null?void 0:n.enter)??h.enter(B.enter,r)})},ye=u.exports.forwardRef((t,e)=>{const{in:n,unmountOnExit:i,animateOpacity:r=!0,startingHeight:o=0,endingHeight:d="auto",style:m,className:p,transition:s,transitionEnd:l,...x}=t,[c,y]=u.exports.useState(!1);u.exports.useEffect(()=>{const q=setTimeout(()=>{y(!0)});return()=>clearTimeout(q)},[]),fe({condition:Boolean(o>0&&i),message:"startingHeight and unmountOnExit are mutually exclusive. You can't use them together"});const v=parseFloat(o.toString())>0,g={startingHeight:o,endingHeight:d,animateOpacity:r,transition:c?s:{enter:{duration:0}},transitionEnd:{enter:l==null?void 0:l.enter,exit:i?l==null?void 0:l.exit:{...l==null?void 0:l.exit,display:v?"block":"none"}}},N=i?n:!0,R=n||i?"enter":"exit";return f.createElement(I,{initial:!1,custom:g},N&&f.createElement(F.div,{ref:e,...x,className:O("chakra-collapse",p),style:{overflow:"hidden",display:"block",...m},custom:g,variants:we,initial:i?"exit":!1,animate:R,exit:"exit"}))});ye.displayName="Collapse";var ge={enter:({transition:t,transitionEnd:e,delay:n}={})=>({opacity:1,transition:(t==null?void 0:t.enter)??h.enter(E.enter,n),transitionEnd:e==null?void 0:e.enter}),exit:({transition:t,transitionEnd:e,delay:n}={})=>({opacity:0,transition:(t==null?void 0:t.exit)??h.exit(E.exit,n),transitionEnd:e==null?void 0:e.exit})},Se={initial:"exit",animate:"enter",exit:"exit",variants:ge},be=u.exports.forwardRef(function(e,n){const{unmountOnExit:i,in:r,className:o,transition:d,transitionEnd:m,delay:p,...s}=e,l=r||i?"enter":"exit",x=i?r&&i:!0,c={transition:d,transitionEnd:m,delay:p};return f.createElement(I,{custom:c},x&&f.createElement(F.div,{ref:n,className:O("chakra-fade",o),custom:c,...Se,animate:l,...s}))});be.displayName="Fade";var Ee={exit:({reverse:t,initialScale:e,transition:n,transitionEnd:i,delay:r})=>({opacity:0,...t?{scale:e,transitionEnd:i==null?void 0:i.exit}:{transitionEnd:{scale:e,...i==null?void 0:i.exit}},transition:(n==null?void 0:n.exit)??h.exit(E.exit,r)}),enter:({transitionEnd:t,transition:e,delay:n})=>({opacity:1,scale:1,transition:(e==null?void 0:e.enter)??h.enter(E.enter,n),transitionEnd:t==null?void 0:t.enter})},Ce={initial:"exit",animate:"enter",exit:"exit",variants:Ee},Fe=u.exports.forwardRef(function(e,n){const{unmountOnExit:i,in:r,reverse:o=!0,initialScale:d=.95,className:m,transition:p,transitionEnd:s,delay:l,...x}=e,c=i?r&&i:!0,y=r||i?"enter":"exit",v={initialScale:d,reverse:o,transition:p,transitionEnd:s,delay:l};return f.createElement(I,{custom:v},c&&f.createElement(F.div,{ref:n,className:O("chakra-offset-slide",m),...Ce,animate:y,custom:v,...x}))});Fe.displayName="ScaleFade";var _={exit:{duration:.15,ease:b.easeInOut},enter:{type:"spring",damping:25,stiffness:180}},Ne={exit:({direction:t,transition:e,transitionEnd:n,delay:i})=>{const{exit:r}=U({direction:t});return{...r,transition:(e==null?void 0:e.exit)??h.exit(_.exit,i),transitionEnd:n==null?void 0:n.exit}},enter:({direction:t,transitionEnd:e,transition:n,delay:i})=>{const{enter:r}=U({direction:t});return{...r,transition:(n==null?void 0:n.enter)??h.enter(_.enter,i),transitionEnd:e==null?void 0:e.enter}}},J=u.exports.forwardRef(function(e,n){const{direction:i="right",style:r,unmountOnExit:o,in:d,className:m,transition:p,transitionEnd:s,delay:l,motionProps:x,...c}=e,y=U({direction:i}),v=Object.assign({position:"fixed"},y.position,r),g=o?d&&o:!0,N=d||o?"enter":"exit",R={transitionEnd:s,transition:p,direction:i,delay:l};return f.createElement(I,{custom:R},g&&f.createElement(F.div,{...c,ref:n,initial:"exit",className:O("chakra-slide",m),animate:N,exit:"exit",custom:R,variants:Ne,style:v,...x}))});J.displayName="Slide";var Re={initial:({offsetX:t,offsetY:e,transition:n,transitionEnd:i,delay:r})=>({opacity:0,x:t,y:e,transition:(n==null?void 0:n.exit)??h.exit(E.exit,r),transitionEnd:i==null?void 0:i.exit}),enter:({transition:t,transitionEnd:e,delay:n})=>({opacity:1,x:0,y:0,transition:(t==null?void 0:t.enter)??h.enter(E.enter,n),transitionEnd:e==null?void 0:e.enter}),exit:({offsetY:t,offsetX:e,transition:n,transitionEnd:i,reverse:r,delay:o})=>{const d={x:e,y:t};return{opacity:0,transition:(n==null?void 0:n.exit)??h.exit(E.exit,o),...r?{...d,transitionEnd:i==null?void 0:i.exit}:{transitionEnd:{...d,...i==null?void 0:i.exit}}}}},Pe={initial:"initial",animate:"enter",exit:"exit",variants:Re},Ie=u.exports.forwardRef(function(e,n){const{unmountOnExit:i,in:r,reverse:o=!0,className:d,offsetX:m=0,offsetY:p=8,transition:s,transitionEnd:l,delay:x,...c}=e,y=i?r&&i:!0,v=r||i?"enter":"exit",g={offsetX:m,offsetY:p,reverse:o,transition:s,transitionEnd:l,delay:x};return f.createElement(I,{custom:g},y&&f.createElement(F.div,{ref:n,className:O("chakra-offset-slide",d),custom:g,...Pe,animate:v,...c}))});Ie.displayName="SlideFade";function Oe({isGoogle:t}){const{isOpen:e,onToggle:n}=V();return u.exports.useEffect(()=>{t&&n()},[t]),a($,{children:a(J,{direction:"bottom",in:e,style:{zIndex:10},children:a(C,{p:"40px",color:"white",mt:"4",bg:"cyan.500",rounded:"md",shadow:"md",children:a(j,{children:S(Y,{fontSize:"xl",color:"gray.200",children:["You are currently logged in with Google. To change your password go"," ",a(te,{color:"cyan.300",href:"https://google.com/account",children:a(ie,{query:"here",styles:{px:"2",py:"1",rounded:"full",bg:"blue.100"},children:"here"})})]})})})})})}function De(){const[t,e]=u.exports.useState(!1),n=ne(ue),{register:i,handleSubmit:r,watch:o,setError:d,clearErrors:m,setFocus:p,formState:{errors:s,isDirty:l,isSubmitting:x,isValid:c,touchedFields:y}}=re({resolver:me(pe)});ee();const{passwordResetEmail:v,confirmPassReset:g,updatePass:N,loading:R,error:q}=xe();V();const X=async w=>{try{await N(w.password,w.currentPassword)}catch(T){console.log(T)}};u.exports.useEffect(()=>{p("password")},[]);const K=ae("white"," gray.800"),k=o("password"),A=o("passwordConfirmation"),Q=w=>{k!==w?d("passwordConfirmation",{type:"manual",message:"Passwords should match!"}):m("passwordConfirmation")};u.exports.useEffect(()=>{Q(A)},[k,A]);const z=()=>{var T,G;const w=(T=ce)==null?void 0:T.currentUser;return w!==null&&((G=w==null?void 0:w.providerData[0])==null?void 0:G.providerId)==="google.com"},Z=!z()&&l&&c&&k===A;return u.exports.useEffect(()=>{e(z())},[]),S(se,{maxW:"container.xl",centerContent:!0,mt:10,children:[a(j,{children:a(oe,{mt:"10",as:F.h1,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},bgGradient:"linear(to-b, #42047e, #07f49e)",bgClip:"text",fontSize:["3xl","3xl","4xl"],fontWeight:"extrabold",children:"Update Password"})}),a(C,{bg:K,border:"2px",borderColor:"gray.700",boxShadow:"dark-lg",p:"5",rounded:"md",mt:10,mb:10,w:"50vw",maxW:"500px",minW:"300px",children:a(C,{p:"3",children:S(le,{onSubmit:r(X),children:[S(C,{my:2,children:[a("input",{type:"hidden",name:"email",value:n.userEmail,autoComplete:"username"}),S(D,{isInvalid:!!s.password,isRequired:!0,variant:"floating",children:[a(L,{...i("password"),id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",mb:"3"}),a(H,{htmlFor:"password",children:"Password:"}),a(W,{children:s.password&&s.password.message})]})]}),a(C,{my:2,children:S(D,{isInvalid:!!s.passwordConfirmation,isRequired:!0,variant:"floating",children:[a(L,{...i("passwordConfirmation"),id:"passwordConfirmation",type:"password",placeholder:"Password Confirmation",autoComplete:"new-password",mb:"3"}),a(H,{htmlFor:"passwordConfirmation",children:"Password Confirmation:"}),a(W,{children:s.passwordConfirmation&&s.passwordConfirmation.message})]})}),a(C,{my:2,children:S(D,{isInvalid:!!s.currentPassword,isRequired:!0,variant:"floating",children:[a(L,{...i("currentPassword"),id:"currentPassword",type:"password",placeholder:"Current Password",autoComplete:"new-password",mb:"1"}),a(H,{htmlFor:"currentPassword",children:"Current Password:"}),a(W,{children:s.currentPassword&&s.currentPassword.message})]})}),a(j,{my:2,children:a(M,{my:4,w:"full",colorScheme:"cyan",isLoading:x,type:"submit",size:"lg",disabled:!Z,variant:"outline",children:"Submit"})}),S(de,{spacing:"1",justify:"center",children:[a(Y,{color:"muted",children:"Already have an account?"}),a(M,{variant:"link",colorScheme:"cyan",children:"Log in"})]})]})})}),a(Oe,{isGoogle:t})]})}export{De as default};
