{"version":3,"file":"PasswordResetPage-e704b998.js","sources":["../../src/pages/PasswordReset/SlideIn.tsx","../../src/pages/PasswordReset/PasswordResetPage.tsx"],"sourcesContent":["import {\n  Box,\n  Center,\n  Highlight,\n  Link,\n  Slide,\n  Text,\n  useDisclosure,\n} from '@chakra-ui/react'\nimport { useEffect } from 'react'\n\nexport default function SlideEx({ isGoogle }: { isGoogle: boolean }) {\n  const { isOpen, onToggle } = useDisclosure()\n\n  useEffect(() => {\n    if (isGoogle) {\n      onToggle()\n    }\n  }, [isGoogle])\n\n  return (\n    <>\n      <Slide direction=\"bottom\" in={isOpen} style={{ zIndex: 10 }}>\n        <Box\n          p=\"40px\"\n          color=\"white\"\n          mt=\"4\"\n          bg=\"cyan.500\"\n          rounded=\"md\"\n          shadow=\"md\"\n        >\n          <Center>\n            <Text fontSize=\"xl\" color=\"gray.200\">\n              You are currently logged in with Google. To change your password\n              go{' '}\n              <Link color=\"cyan.300\" href={'https://google.com/account'}>\n                <Highlight\n                  query=\"here\"\n                  styles={{ px: '2', py: '1', rounded: 'full', bg: 'blue.100' }}\n                >\n                  here\n                </Highlight>\n              </Link>\n            </Text>\n          </Center>\n        </Box>\n      </Slide>\n    </>\n  )\n}\n","import { PasswordResetSchema, PasswordResetType } from '@/data/paySchema'\nimport { auth } from '@/firebase'\nimport { useStore } from '@/stores/store'\nimport {\n  Box,\n  Button,\n  Center,\n  Container,\n  FormControl,\n  FormErrorMessage,\n  FormLabel,\n  Heading,\n  HStack,\n  Input,\n  Text,\n  useColorModeValue,\n} from '@chakra-ui/react'\nimport { zodResolver } from '@hookform/resolvers/zod'\nimport { motion as m } from 'framer-motion'\nimport { useEffect, useRef, useState } from 'react'\nimport { SubmitHandler, useForm } from 'react-hook-form'\nimport { Form, Link as RouterLink } from 'react-router-dom'\n\nimport { usePasswordReset } from '@/hooks/usePasswordReset'\nimport { routes } from '@/lib/routes'\nimport SlideIn from '@/pages/PasswordReset/SlideIn'\n\nexport default function PasswordReset() {\n  const [isGoogle, setIsGoogle] = useState(false)\n  const user = useStore()\n  const {\n    register,\n    handleSubmit,\n    watch,\n    setError,\n    clearErrors,\n    setFocus,\n    formState: { errors, isDirty, isSubmitting, isValid, touchedFields },\n  } = useForm<PasswordResetType>({\n    resolver: zodResolver(PasswordResetSchema),\n  })\n\n  const { updatePass, error } = usePasswordReset()\n\n  const onSubmit: SubmitHandler<PasswordResetType> = async (data) => {\n    try {\n      await updatePass(data.password, data.currentPassword)\n    } catch (error) {\n      console.log(error)\n    }\n  }\n  useEffect(() => {\n    setFocus('password')\n  }, [])\n\n  const bg = useColorModeValue('white', ' gray.800')\n\n  const password = watch('password')\n  const passwordConfirmation = watch('passwordConfirmation')\n\n  const passwordMatch = (value: string) => {\n    if (password !== value) {\n      setError('passwordConfirmation', {\n        type: 'manual',\n        message: 'Passwords should match!',\n      })\n    } else {\n      clearErrors('passwordConfirmation')\n    }\n  }\n  useEffect(() => {\n    passwordMatch(passwordConfirmation)\n  }, [password, passwordConfirmation])\n\n  const isAuthenticatedWithGoogle = () => {\n    const user = auth?.currentUser\n    if (user !== null) {\n      if (user?.providerData[0]?.providerId === 'google.com') {\n        return true\n      }\n    }\n    return false\n  }\n\n  const canSubmit =\n    !isAuthenticatedWithGoogle() &&\n    isDirty &&\n    isValid &&\n    password === passwordConfirmation\n\n  useEffect(() => {\n    setIsGoogle(isAuthenticatedWithGoogle())\n  }, [])\n\n  // hidden email input for password managers\n  const usernameRef = useRef<HTMLInputElement>(null)\n  useEffect(() => {\n    if (usernameRef.current) {\n      usernameRef.current.value = user.userEmail\n    }\n  }, [user.userEmail])\n\n  return (\n    <Container maxW=\"container.xl\" centerContent mt={10}>\n      <Center>\n        <Heading\n          mt=\"10\"\n          as={m.h1}\n          initial={{ opacity: 0 }}\n          animate={{ opacity: 1 }}\n          exit={{ opacity: 0 }}\n          bgGradient=\"linear(to-b, #42047e, #07f49e)\"\n          bgClip=\"text\"\n          fontSize={['3xl', '3xl', '4xl']}\n          fontWeight=\"extrabold\"\n        >\n          Update Password\n        </Heading>\n      </Center>\n      <m.div\n        initial={{ opacity: 0, y: 80, scale: 0.8 }}\n        animate={{ opacity: 1, y: 0, scale: [0.9, 1.2, 1] }}\n        transition={{\n          type: 'spring',\n          stiffness: 90,\n\n          damping: 15,\n        }}\n        exit={{ opacity: 0 }}\n      >\n        <Box\n          bg={bg}\n          border=\"2px\"\n          borderColor=\"gray.700\"\n          boxShadow=\"dark-lg\"\n          p=\"5\"\n          rounded=\"md\"\n          mt={10}\n          mb={10}\n          w=\"50vw\"\n          maxW=\"500px\"\n          minW=\"350px\"\n        >\n          <Box p=\"3\">\n            <Form onSubmit={handleSubmit(onSubmit)}>\n              <Box my={2}>\n                <Input\n                  type=\"hidden\"\n                  autoComplete=\"email\"\n                  ref={usernameRef}\n                  placeholder=\"username\"\n                />\n                <FormControl\n                  isInvalid={errors.password ? true : false}\n                  isRequired\n                  variant=\"floating\"\n                >\n                  <Input\n                    {...register('password')}\n                    id=\"password\"\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    autoComplete=\"new-password\"\n                    mb=\"3\"\n                  />\n                  <FormLabel htmlFor=\"password\">Password:</FormLabel>\n                  <FormErrorMessage>\n                    {errors.password && errors.password.message}\n                  </FormErrorMessage>\n                </FormControl>\n              </Box>\n              <Box my={2}>\n                <FormControl\n                  isInvalid={errors.passwordConfirmation ? true : false}\n                  isRequired\n                  variant=\"floating\"\n                >\n                  <Input\n                    {...register('passwordConfirmation')}\n                    id=\"passwordConfirmation\"\n                    type=\"password\"\n                    placeholder=\"Password Confirmation\"\n                    autoComplete=\"new-password\"\n                    mb=\"3\"\n                  />\n                  <FormLabel htmlFor=\"passwordConfirmation\">\n                    Password Confirmation:\n                  </FormLabel>\n                  <FormErrorMessage>\n                    {errors.passwordConfirmation &&\n                      errors.passwordConfirmation.message}\n                  </FormErrorMessage>\n                </FormControl>\n              </Box>\n              <Box my={2}>\n                <FormControl\n                  isInvalid={errors.currentPassword ? true : false}\n                  isRequired\n                  variant=\"floating\"\n                >\n                  <Input\n                    {...register('currentPassword')}\n                    id=\"currentPassword\"\n                    type=\"password\"\n                    placeholder=\"Current Password\"\n                    autoComplete=\"new-password\"\n                    mb=\"1\"\n                  />\n                  <FormLabel htmlFor=\"currentPassword\">\n                    Current Password:\n                  </FormLabel>\n                  <FormErrorMessage>\n                    {errors.currentPassword && errors.currentPassword.message}\n                  </FormErrorMessage>\n                </FormControl>\n              </Box>\n\n              <Center my={2}>\n                <Button\n                  my={4}\n                  w=\"full\"\n                  colorScheme=\"cyan\"\n                  isLoading={isSubmitting}\n                  type=\"submit\"\n                  size=\"lg\"\n                  disabled={!canSubmit}\n                  variant=\"outline\"\n                >\n                  Submit\n                </Button>\n              </Center>\n              <HStack spacing=\"1\" justify=\"center\">\n                <Text color=\"muted\">Go back to</Text>\n                <Button\n                  as={RouterLink}\n                  to={routes.DASHBOARD}\n                  variant=\"link\"\n                  colorScheme=\"cyan\"\n                >\n                  Dashboard\n                </Button>\n              </HStack>\n            </Form>\n          </Box>\n        </Box>\n      </m.div>\n      <SlideIn isGoogle={isGoogle} />\n    </Container>\n  )\n}\n"],"names":["SlideEx","isGoogle","isOpen","onToggle","useDisclosure","useEffect","jsx","Fragment","Slide","Box","Center","jsxs","Text","Link","Highlight","PasswordReset","setIsGoogle","useState","user","useStore","register","handleSubmit","watch","setError","clearErrors","setFocus","errors","isDirty","isSubmitting","isValid","touchedFields","useForm","zodResolver","PasswordResetSchema","updatePass","error","usePasswordReset","onSubmit","data","bg","useColorModeValue","password","passwordConfirmation","passwordMatch","value","isAuthenticatedWithGoogle","_a","auth","canSubmit","usernameRef","useRef","Container","Heading","m","Form","Input","FormControl","FormLabel","FormErrorMessage","Button","HStack","RouterLink","routes","SlideIn"],"mappings":"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"}