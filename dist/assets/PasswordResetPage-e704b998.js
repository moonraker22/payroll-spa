import{r as a,j as r,F as z,o as s}from"./index-24a35cdf.js";import{u as B,s as M,e as T,I as l,F as f,a as w,b as g}from"./zod.module-af5a49a2.js";import{c as A}from"./firebase-0ba5c52c.js";import{u as O}from"./store-42d03b25.js";import{F as U,v as S,Q as V,M as Q,y as Y}from"./motion-cdcae086.js";import{u as $}from"./usePasswordReset-ac5be2ee.js";import{S as J}from"./index.esm-b014f26f.js";import{B as t,C as y,T as v,L as K,i as N,a as X,b as Z,H as _}from"./index.esm-2b3a3b4e.js";import{u as rr}from"./index.esm-699be640.js";import{a as P}from"./index.esm-72ff9165.js";import"./index-75959897.js";import"./index.esm-f315c78a.js";import"./index.esm-3baeca56.js";function er({isGoogle:i}){const{isOpen:c,onToggle:n}=rr();return a.exports.useEffect(()=>{i&&n()},[i]),r(z,{children:r(J,{direction:"bottom",in:c,style:{zIndex:10},children:r(t,{p:"40px",color:"white",mt:"4",bg:"cyan.500",rounded:"md",shadow:"md",children:r(y,{children:s(v,{fontSize:"xl",color:"gray.200",children:["You are currently logged in with Google. To change your password go"," ",r(K,{color:"cyan.300",href:"https://google.com/account",children:r(N,{query:"here",styles:{px:"2",py:"1",rounded:"full",bg:"blue.100"},children:"here"})})]})})})})})}function gr(){const[i,c]=a.exports.useState(!1),n=O(),{register:m,handleSubmit:F,watch:x,setError:E,clearErrors:R,setFocus:I,formState:{errors:e,isDirty:k,isSubmitting:D,isValid:G,touchedFields:or}}=B({resolver:M(T)}),{updatePass:H,error:sr}=$(),L=async o=>{try{await H(o.password,o.currentPassword)}catch(d){console.log(d)}};a.exports.useEffect(()=>{I("password")},[]);const W=U("white"," gray.800"),p=x("password"),u=x("passwordConfirmation"),j=o=>{p!==o?E("passwordConfirmation",{type:"manual",message:"Passwords should match!"}):R("passwordConfirmation")};a.exports.useEffect(()=>{j(u)},[p,u]);const b=()=>{var d,C;const o=(d=A)==null?void 0:d.currentUser;return o!==null&&((C=o==null?void 0:o.providerData[0])==null?void 0:C.providerId)==="google.com"},q=!b()&&k&&G&&p===u;a.exports.useEffect(()=>{c(b())},[]);const h=a.exports.useRef(null);return a.exports.useEffect(()=>{h.current&&(h.current.value=n.userEmail)},[n.userEmail]),s(X,{maxW:"container.xl",centerContent:!0,mt:10,children:[r(y,{children:r(Z,{mt:"10",as:S.h1,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},bgGradient:"linear(to-b, #42047e, #07f49e)",bgClip:"text",fontSize:["3xl","3xl","4xl"],fontWeight:"extrabold",children:"Update Password"})}),r(S.div,{initial:{opacity:0,y:80,scale:.8},animate:{opacity:1,y:0,scale:[.9,1.2,1]},transition:{type:"spring",stiffness:90,damping:15},exit:{opacity:0},children:r(t,{bg:W,border:"2px",borderColor:"gray.700",boxShadow:"dark-lg",p:"5",rounded:"md",mt:10,mb:10,w:"50vw",maxW:"500px",minW:"350px",children:r(t,{p:"3",children:s(V,{onSubmit:F(L),children:[s(t,{my:2,children:[r(l,{type:"hidden",autoComplete:"email",ref:h,placeholder:"username"}),s(f,{isInvalid:!!e.password,isRequired:!0,variant:"floating",children:[r(l,{...m("password"),id:"password",type:"password",placeholder:"Password",autoComplete:"new-password",mb:"3"}),r(w,{htmlFor:"password",children:"Password:"}),r(g,{children:e.password&&e.password.message})]})]}),r(t,{my:2,children:s(f,{isInvalid:!!e.passwordConfirmation,isRequired:!0,variant:"floating",children:[r(l,{...m("passwordConfirmation"),id:"passwordConfirmation",type:"password",placeholder:"Password Confirmation",autoComplete:"new-password",mb:"3"}),r(w,{htmlFor:"passwordConfirmation",children:"Password Confirmation:"}),r(g,{children:e.passwordConfirmation&&e.passwordConfirmation.message})]})}),r(t,{my:2,children:s(f,{isInvalid:!!e.currentPassword,isRequired:!0,variant:"floating",children:[r(l,{...m("currentPassword"),id:"currentPassword",type:"password",placeholder:"Current Password",autoComplete:"new-password",mb:"1"}),r(w,{htmlFor:"currentPassword",children:"Current Password:"}),r(g,{children:e.currentPassword&&e.currentPassword.message})]})}),r(y,{my:2,children:r(P,{my:4,w:"full",colorScheme:"cyan",isLoading:D,type:"submit",size:"lg",disabled:!q,variant:"outline",children:"Submit"})}),s(_,{spacing:"1",justify:"center",children:[r(v,{color:"muted",children:"Go back to"}),r(P,{as:Q,to:Y.DASHBOARD,variant:"link",colorScheme:"cyan",children:"Dashboard"})]})]})})})}),r(er,{isGoogle:i})]})}export{gr as default};
//# sourceMappingURL=PasswordResetPage-e704b998.js.map
