import{p as o,j as t,f as E,d as A,r as M}from"./index-ad61e450.js";import{U as g,V as k,i as v,j as w,W as C,k as f,l as I,d as O,s as P,m as W,X as p,n as l,Y as x,Z as L,v as F,M as j,w as Y,_ as $}from"./routes-3ee497c9.js";import{u as B,c as N,T as D,a as n,b as H,d as R,e as d,f as q,g as s,h as G,i as V}from"./currency.es-1e8bfebb.js";import{t as z}from"./index-344f66e9.js";function K(e,i){g(2,arguments);var r=z(e),a=k(i);return isNaN(a)?new Date(NaN):(a&&r.setDate(r.getDate()+a),r)}function U(e,i){g(2,arguments);var r=k(i),a=r*7;return K(e,a)}function X({weekStart:e}){const i=v(P),r=U(e,1).toISOString(),a=w(I(O,"users",`${(i==null?void 0:i.userId)||"empty"}`,`${W.PAYSHEETS}`),f("date",">=",e),f("date","<=",Date.parse(r)),C("date","desc")),[u,m,c]=B(a);return{weekData:u,error:c,loading:m}}function Z({day:e}){const i=`${new Date(e==null?void 0:e.date).toDateString().slice(0,3)} ${new Date(e==null?void 0:e.date).toISOString().slice(6,10).split("-").join("/")}`,a=N((()=>(e==null?void 0:e.payMiles)>(e==null?void 0:e.totalMiles)?e==null?void 0:e.payMiles:e==null?void 0:e.totalMiles)(),{precision:2}).multiply(.515).add(e==null?void 0:e.backhaul).format();return o(D,{children:[t(n,{children:t(p,{to:l.DAILY,state:e,children:i})}),t(n,{isNumeric:!0,children:e.payMiles}),t(n,{isNumeric:!0,children:e.totalMiles}),t(n,{isNumeric:!0,children:N(e.backhaul).format()}),t(n,{isNumeric:!0,children:a}),t(n,{isNumeric:!0,children:t(p,{to:l.DAILY,state:e,children:t(x,{as:L,w:6,h:6,color:"cyan.600"})})})]})}function ee(){const e=E(),i=A(),r=e==null?void 0:e.state;M.exports.useEffect(()=>{r===void 0&&i(l.DASHBOARD)},[e.state,i]);const a=(r==null?void 0:r.startDate)||"",u=r==null?void 0:r.weekStartFormat,m=r==null?void 0:r.weekEndFormat,{weekData:c,loading:b}=X({weekStart:Date.parse(a)}),h=F("gray","cyan.600");return t(j,{maxW:{base:"100%",sm:"95%",lg:"90%"},children:t(H,{my:"40",border:"1px",borderColor:h,rounded:20,py:"5",as:Y.div,initial:{opacity:0,y:80},animate:{opacity:1,y:0},exit:{opacity:0},children:o(R,{variant:"simple",colorScheme:h,size:{base:"sm",sm:"md",lg:"lg"},children:[t(d,{placement:"top",children:"PAY FOR THE WEEK"}),o(d,{placement:"bottom",children:["Week from ",u," - ",m]}),o(d,{placement:"bottom",children:["Go back to"," ",t($,{as:p,to:l.DASHBOARD,color:h,children:"Dashboard"})]}),t(q,{children:o(D,{children:[t(s,{children:"Day"}),t(s,{isNumeric:!0,children:"Pay Miles"}),t(s,{isNumeric:!0,children:"Actual Miles"}),t(s,{isNumeric:!0,children:"Backhaul"}),t(s,{isNumeric:!0,children:"Total Pay"}),t(s,{isNumeric:!0,children:"Edit"})]})}),!b&&(c==null?void 0:c.map((T,S)=>t(G,{children:t(Z,{day:T})},S))),t(V,{children:o(D,{children:[t(s,{children:"Day"}),t(s,{isNumeric:!0,children:"Pay Miles"}),t(s,{isNumeric:!0,children:"Actual Miles"}),t(s,{isNumeric:!0,children:"Backhaul"}),t(s,{isNumeric:!0,children:"Total Pay"}),t(s,{isNumeric:!0,children:"Edit"})]})})]})})})}export{ee as default};
